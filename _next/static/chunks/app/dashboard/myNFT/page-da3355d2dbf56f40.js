(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6228],{46601:function(){},9949:function(e,t,n){Promise.resolve().then(n.bind(n,77307))},77307:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var s=n(57437),a=n(46340),r=n(88110),i=n.n(r),l=n(28170),o=n(33071),c=n(49385),d=n(15393),u=n(2265),f=n(56926),w=n(43574),m=n(6316),h=n(92501),v=n(2116),x=n(45711),N=n(17331);let g=n(59526).Mt;var j=e=>{let[t,n]=(0,u.useState)(""),a=e=>{n(e.target.value)},r=(0,h.K)({chain:m.F,transport:(0,v.P)(window.ethereum)});(0,x.v)({chain:m.F,transport:(0,v.P)(window.ethereum)});let l=async t=>{let[n]=await r.getAddresses();await r.writeContract({account:n,chain:m.F,address:N.US,abi:g,functionName:"approve",args:[N.US,e.tokenId]})},o=async t=>{let[n]=await r.getAddresses(),s=await r.writeContract({account:n,address:N.US,abi:g,functionName:"safeTransferFrom",args:[e.from,t,e.tokenId]});return s},c=async t=>{await l(t),await o(t),console.log("===================================="),console.log("转让成功"),console.log("===================================="),e.sendSuccess()};return(0,s.jsxs)("div",{children:[(0,s.jsx)(w.Z,{value:t,onChange:e=>a(e)}),(0,s.jsx)(i(),{onClick:()=>c(t),children:"转让"},"submit")]})},p=()=>{let{address:e,isConnected:t}=(0,f.mA)(),[n,r]=(0,u.useState)([]),{chain:w}=(0,f.LN)(),[m,h]=(0,u.useState)(""),[v,x]=(0,u.useState)(!1),[N,g]=(0,u.useState)(!1),p=async()=>{let t;x(!0);let n=new a.m({apiKey:"ReBoqRd9z_DXXZIJQELN6KXNmJmYoWa3",network:(null==w||w.network,a.N.ETH_SEPOLIA)});(t=await n.nft.getNftsForOwner((e||"").toString()))&&r(t.ownedNfts),x(!1)};(0,u.useEffect)(()=>(e&&p(),()=>{}),[e]);let k=e=>{h(e.tokenId),g(!0)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex flex-wrap",children:v?(0,s.jsx)(c.Z,{className:"w-full h-full"}):n.map(e=>{var t,n;return(0,s.jsxs)(l.Z,{hoverable:!0,style:{width:240},cover:(0,s.jsx)("img",{src:null===(t=e.rawMetadata)||void 0===t?void 0:t.image,alt:""}),className:"ml-10",children:[(0,s.jsx)("div",{className:"p-2",children:(0,s.jsx)(i(),{className:"w-full",onClick:()=>k(e),children:"转让"})}),(0,s.jsx)(d.Z,{title:e.title,description:e.description})]},null===(n=e.tokenUri)||void 0===n?void 0:n.raw)})}),(0,s.jsx)(o.Z,{title:"转让",onCancel:()=>g(!1),open:N,footer:(0,s.jsx)(s.Fragment,{}),children:(0,s.jsx)(j,{from:e,tokenId:m,sendSuccess:()=>{p(),g(!1)}})})]})}}},function(e){e.O(0,[9869,4533,8110,9766,1389,6354,9304,6662,5793,2126,2971,596,1744],function(){return e(e.s=9949)}),_N_E=e.O()}]);