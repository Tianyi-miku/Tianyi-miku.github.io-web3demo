(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9084],{95856:function(){},79694:function(e,t,n){Promise.resolve().then(n.bind(n,73297))},17331:function(e,t,n){"use strict";n.d(t,{DL:function(){return l},Kr:function(){return u},US:function(){return a},Zu:function(){return s},nF:function(){return i},nK:function(){return p},pj:function(){return r}});let a="0x00E275e0bFF194e7835467B7d937623271A88905",i="0x3A6d255584Ce563e7cae078967BD1847fB380871",s="0xDEce07B7a7c7CE6Cb50adB8Daf54FCc2932873fd",u="0x9b347072a82435AeB60984CDA2C56E659E53217D",r="0x20c00b9AeF00640b3c7c0ac8Ba55a2687441521C",l="0x5eD63aA92B32233A9d246e4b5ECB1FAd3866470B",p="0x40BD53241B48a3Ff8971967329522e673543082A"},73297:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n(57437),i=n(2265),s=n(56926),u=n(17331),r=n(88110),l=n.n(r),p=n(99475),d=n(84797),y=n(57415),o=n(3605),c=n(34549);let m=n(65675).Mt;var f=()=>{let{address:e,isConnected:t}=(0,s.mA)(),[n,r]=(0,i.useState)(Object),[f,b]=(0,i.useState)(""),T=(0,c.zu)(),v=new y.CH(u.nF,m,T);async function w(){let e=await v.joinPlay({value:(0,p.f)("0.1")}),t=await e.wait();t.status&&h()}async function x(){if(Number((0,o.dF)(n.value))>.1){let e=await v.requestRandomWords();await e.wait(),M();return}}(0,i.useEffect)(()=>(v.runner&&h(),()=>{}),[v.runner,e]),(0,i.useEffect)(()=>(v.runner&&M(),()=>{}),[v.runner]);let h=async()=>{let e=await (0,d.EG)({address:u.nF});r(e)},M=async()=>{let e=await v.getwiner();console.log(e),b(e)};async function j(){let e=await v.winerdraw(),t=await e.wait();t.status&&(h(),M())}return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("div",{className:"text-center p-10 text-lg",children:["猫猫抽奖！（chainlink上获取随机数）",(0,a.jsx)("span",{className:"pt-5",children:"(超过0.1 eth可开奖！)"}),(0,a.jsx)(l(),{className:"ml-10",onClick:()=>w(),children:"参与抽奖！"}),(0,a.jsxs)("div",{className:"ml-10",children:["当前奖池",n.formatted,n.symbol]})]})}),(0,a.jsx)("div",{className:"w-full flex justify-center",children:(0,a.jsx)("img",{src:"/Tianyi-miku.github.io-web3demo//_next/static/media/R.a356ebc1.jpg",className:"h-96"})}),(0,a.jsx)("div",{className:"pt-10",children:(0,a.jsx)(l(),{onClick:()=>x(),children:"开奖"})}),(0,a.jsxs)("div",{children:["获奖人",f]}),(0,a.jsx)("div",{children:"如果失败，因为回调气体是手动设置的，部署时候可更改callbackGasLimit"}),(0,a.jsxs)("div",{className:"pt-10",children:[(0,a.jsx)(l(),{onClick:()=>j(),children:"提取奖金！"}),"提取为了测试没做限制，任何人都可以将里面的测试币提取出来！"]}),(0,a.jsx)("div",{className:"pt-10",children:"此用例是sepolia上。 如果是本地chain.link MOCK数据 部署完成之后，要手动调用fulfillRandomWords 或者运行 '/backend/scripts/mock.ts' ！"})]})}},34549:function(e,t,n){"use strict";n.d(t,{zu:function(){return r}});var a=n(2265),i=n(56926),s=n(46905),u=n(85761);function r(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:t}=(0,i.py)({chainId:e});return a.useMemo(()=>t?function(e){var t,n;let{account:a,chain:i,transport:r}=e,l={chainId:i.id,name:i.name,ensAddress:null===(n=i.contracts)||void 0===n?void 0:null===(t=n.ensRegistry)||void 0===t?void 0:t.address},p=new s.Q(r,l),d=new u.C1(p,a.address);return d}(t):void 0,[t])}},99475:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var a=n(66362);function i(e,t="wei"){return function(e,t){let[n,a="0"]=e.split("."),i=n.startsWith("-");if(i&&(n=n.slice(1)),a=a.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${a}`))&&(n=`${BigInt(n)+1n}`),a="";else if(a.length>t){let[e,i,s]=[a.slice(0,t-1),a.slice(t-1,t),a.slice(t)],u=Math.round(Number(`${i}.${s}`));(a=u>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${u}`).length>t&&(a=a.slice(1),n=`${BigInt(n)+1n}`),a=a.slice(0,t)}else a=a.padEnd(t,"0");return BigInt(`${i?"-":""}${n}${a}`)}(e,a.ez[t])}},65675:function(e){"use strict";e.exports=JSON.parse('{"Mt":[{"inputs":[{"internalType":"uint64","name":"subscriptionId","type":"uint64"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"CallFailed","type":"error"},{"inputs":[{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"paid","type":"uint256"}],"name":"InsufficientFunds","type":"error"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"JoinPaly_Error","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"LinkTransferError","type":"error"},{"inputs":[{"internalType":"address","name":"have","type":"address"},{"internalType":"address","name":"want","type":"address"}],"name":"OnlyCoordinatorCanFulfill","type":"error"},{"inputs":[{"internalType":"uint256","name":"requestId","type":"uint256"}],"name":"RequestNotFound","type":"error"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"slottery_Error","type":"error"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"","type":"address"},{"indexed":false,"internalType":"uint256","name":"","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"","type":"uint256"}],"name":"Log","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"OwnershipTransferRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"requestId","type":"uint256"},{"indexed":false,"internalType":"uint256[]","name":"randomWords","type":"uint256[]"}],"name":"RequestFulfilled","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"requestId","type":"uint256"},{"indexed":false,"internalType":"uint32","name":"numWords","type":"uint32"}],"name":"RequestSent","type":"event"},{"stateMutability":"payable","type":"fallback"},{"inputs":[],"name":"acceptOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getNumberOfRequests","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_requestId","type":"uint256"}],"name":"getRequestStatus","outputs":[{"internalType":"bool","name":"fulfilled","type":"bool"},{"internalType":"uint256[]","name":"randomWords","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getwiner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"joinPlay","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"lastRequestId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"peopleTomoney","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"requestId","type":"uint256"},{"internalType":"uint256[]","name":"randomWords","type":"uint256[]"}],"name":"rawFulfillRandomWords","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"requestIds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"requestRandomWords","outputs":[{"internalType":"uint256","name":"requestId","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"s_requests","outputs":[{"internalType":"bool","name":"fulfilled","type":"bool"},{"internalType":"bool","name":"exists","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"winerdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]}')}},function(e){e.O(0,[4533,8110,6905,3605,2971,596,1744],function(){return e(e.s=79694)}),_N_E=e.O()}]);